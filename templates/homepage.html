{% extends "base.html" %}
{% block title %}Feed{% endblock %}

{% block content %}

<h1>My Feed</h1>
<ul class="nav nav-tabs">
	<button id="all">All</button>
	<button id="connections">My Connections</button>
	<div id="post"></div>
	<input type="hidden" id="offset" value="0">
	<input type="hidden" id="connectionoffset" value="0">
</ul>
<!-- <div id="connectionpost"></div> -->

<script
  src="https://code.jquery.com/jquery-3.1.1.min.js"
  integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
  crossorigin="anonymous">
</script>

<script>


$("#all").on("click", function() {
	$("#connectionoffset").val(0)
	var currentOffset = parseInt($("#offset").val());
	$("#post").html("");
	$.get("/feed-all-json", {"offset": currentOffset}, function(results) {
		for (var i=0; i < results["results"].length; i++) {
			$("#post").append("<h1>" + results["results"][i][1] 
				+ "</h1>" + "<h2> Posted by: <a href='/profile/" + results["results"][i].slice(3,4) +
				"''>" + results["results"][i][0] + "</a> </h2>" 
				+ results["results"][i].slice(2,3) + " <a href='/update/" + results["results"][i].slice(4) 
				+ "'>Link to Update</a>" + "<br>");
		}
	$("#offset").val(currentOffset + 20)
	}
)});

$("#connections").on("click", function() {
	$("#offset").val(0)
	var currentOffset = parseInt($("#connectionoffset").val());
	$("#post").html("");
	$.get("/feed-connects-json", function(results) {
		for (var i=0; i < results["results"].length; i++) {
			$("#post").append("<h1>" + results["results"][i][1] 
				+ "</h1>" + "<h2> Posted by: <a href='/profile/" + results["results"][i].slice(3,4) +
				"''>" + results["results"][i][0] + "</a> </h2>"
				+ results["results"][i].slice(2,3) + " <a href='/update/" + results["results"][i].slice(4) 
				+ "'>Link to Update</a>" + "<br>");
		}
	$("#connectionoffset").val(currentOffset + 20)
	}
)});


</script>

{% endblock %}